{"version":3,"sources":["src/index.js"],"names":["insertCommaAfterTwoChars","str","replace","removeDots","selectArrayInterval","arr","initial","final","arrAux","i","push","mountJSON","html","type","arrData","result","$","cheerio","load","text","split","length","Promise","resolve","JSON","stringify","err","errCode","e","reject","numberRaffle","locationRaffle","unorNumbers","orderedNumbers","date","totalCollection","isAccumulated","parseInt","sena","winers","prizeByWinner","quina","quadra","nextRaffle","estimatedPrize","accumulated","accumulatedMegavirada","join","terno","duque","accumulatedSaoJoao","acertos15","acertos14","acertos13","acertos12","acertos11","require","rp","Object","defineProperty","exports","value","resultByNumber","number","jar","encoding","error"],"mappings":"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","sourcesContent":["const cheerio = require('cheerio')\r\nconst rp = require('request-promise')\r\n\r\nObject.defineProperty(exports, '__esModule', {\r\n  value: true\r\n})\r\n\r\nfunction insertCommaAfterTwoChars (str) {\r\n  return str.replace(/\\B(?=(\\d{2})+(?!\\d))/g, ',')\r\n}\r\n\r\nfunction removeDots (str) {\r\n  return str.replace(/\\./g, '')\r\n}\r\n\r\nfunction selectArrayInterval (arr, initial, final) {\r\n  const arrAux = []\r\n  for (let i = initial - 1; i <= final - 1; i++) {\r\n    arrAux.push(arr[i])\r\n  }\r\n  return arrAux\r\n}\r\n\r\nasync function mountJSON (html, type) {\r\n  // eslint-disable-next-line prefer-const\r\n  let $ = cheerio.load(html)\r\n  let arrData\r\n  let result\r\n\r\n  if ($('body').text().split('|').length < 4) {\r\n    return Promise.resolve(JSON.stringify({ err: 'Resultado nÃ£o disponivel!', errCode: 1 }))\r\n  }\r\n\r\n  try {\r\n    arrData = $('body').text().split('|')\r\n  } catch (e) {\r\n    return Promise.reject(JSON.stringify(e))\r\n  }\r\n\r\n  if (type === 'megasena') {\r\n    try {\r\n      result = {\r\n        numberRaffle: arrData[0],\r\n        locationRaffle: `${arrData[14]},${arrData[12]},${arrData[13]}`,\r\n        unorNumbers: insertCommaAfterTwoChars(arrData[2]),\r\n        orderedNumbers: insertCommaAfterTwoChars(arrData[20]),\r\n        date: arrData[11],\r\n        totalCollection: arrData[24],\r\n        // eslint-disable-next-line radix\r\n        isAccumulated: parseInt(arrData[3]) === 0,\r\n        sena: {\r\n          winers: removeDots(arrData[3]),\r\n          prizeByWinner: arrData[4]\r\n        },\r\n        quina: {\r\n          winers: removeDots(arrData[5]),\r\n          prizeByWinner: arrData[6]\r\n        },\r\n        quadra: {\r\n          winers: removeDots(arrData[7]),\r\n          prizeByWinner: arrData[8]\r\n        },\r\n        nextRaffle: {\r\n          date: arrData[22],\r\n          estimatedPrize: arrData[21],\r\n          accumulated: arrData[1]\r\n        },\r\n        accumulatedMegavirada: arrData[23]\r\n        // eslint-disable-next-line semi\r\n      }\r\n    } catch (e) {\r\n      return Promise.reject(JSON.stringify(e))\r\n    }\r\n  }\r\n  if (type === 'quina') {\r\n    try {\r\n      // console.log(arrData)\r\n      result = {\r\n        numberRaffle: arrData[0],\r\n        locationRaffle: `${arrData[4]},${arrData[2]},${arrData[3]}`,\r\n        unorNumbers: selectArrayInterval(insertCommaAfterTwoChars(arrData[14]).split(','), 1, 5).join(','),\r\n        orderedNumbers: selectArrayInterval(insertCommaAfterTwoChars(arrData[14]).split(','), 6, 10).join(','),\r\n        date: arrData[16],\r\n        totalCollection: arrData[20],\r\n        // eslint-disable-next-line radix\r\n        isAccumulated: parseInt(arrData[6]) === 0,\r\n        quina: {\r\n          winers: removeDots(arrData[6]),\r\n          prizeByWinner: arrData[7]\r\n        },\r\n        quadra: {\r\n          winers: removeDots(arrData[8]),\r\n          prizeByWinner: arrData[9]\r\n        },\r\n        terno: {\r\n          winers: removeDots(arrData[10]),\r\n          prizeByWinner: arrData[11]\r\n        },\r\n        duque: {\r\n          winers: removeDots(arrData[23]),\r\n          prizeByWinner: arrData[22]\r\n        },\r\n        nextRaffle: {\r\n          date: arrData[18],\r\n          estimatedPrize: arrData[17],\r\n          accumulated: arrData[13]\r\n        },\r\n        accumulatedSaoJoao: arrData[21]\r\n        // eslint-disable-next-line semi\r\n      }\r\n    } catch (e) {\r\n      return Promise.reject(JSON.stringify(e))\r\n    }\r\n  }\r\n\r\n  if (type === 'lotofacil') {\r\n    try {\r\n      // console.log(arrData, arrData.length)\r\n      result = {\r\n        numberRaffle: arrData[0],\r\n        locationRaffle: `${arrData[31]},${arrData[32]},${arrData[33]}`,\r\n        unorNumbers: selectArrayInterval(arrData, 39, 53).join(','),\r\n        orderedNumbers: selectArrayInterval(arrData, 4, 18).join(','),\r\n        date: arrData[34],\r\n        totalCollection: arrData[55],\r\n        // eslint-disable-next-line radix\r\n        isAccumulated: parseInt(arrData[18]) === 0,\r\n        acertos15: {\r\n          winers: removeDots(arrData[18]),\r\n          prizeByWinner: arrData[19]\r\n        },\r\n        acertos14: {\r\n          winers: removeDots(arrData[20]),\r\n          prizeByWinner: arrData[21]\r\n        },\r\n        acertos13: {\r\n          winers: removeDots(arrData[22]),\r\n          prizeByWinner: arrData[23]\r\n        },\r\n        acertos12: {\r\n          winers: removeDots(arrData[24]),\r\n          prizeByWinner: arrData[25]\r\n        },\r\n        acertos11: {\r\n          winers: removeDots(arrData[26]),\r\n          prizeByWinner: arrData[27]\r\n        },\r\n        nextRaffle: {\r\n          date: arrData[54],\r\n          estimatedPrize: arrData[53],\r\n          accumulated: arrData[56]\r\n        }\r\n        // eslint-disable-next-line semi\r\n      }\r\n    } catch (e) {\r\n      return Promise.reject(JSON.stringify(e))\r\n    }\r\n  }\r\n\r\n  return Promise.resolve(result)\r\n}\r\n\r\n// eslint-disable-next-line func-names\r\nexports.resultByNumber = async function (type, number) {\r\n  let html\r\n  if (number === undefined) {\r\n    try {\r\n      html = await rp(`http://www1.caixa.gov.br/loterias/loterias/${type}/${type}_pesquisa_new.asp`, {\r\n        jar: true,\r\n        encoding: 'binary'\r\n      })\r\n      return await mountJSON(html, type)\r\n    } catch (err) {\r\n      return Promise.reject(JSON.stringify(err.error))\r\n    }\r\n  } else {\r\n    try {\r\n      html = await rp(`http://www1.caixa.gov.br/loterias/loterias/${type}/${type}_pesquisa_new.asp?submeteu=sim&opcao=concurso&txtConcurso=${number}`, {\r\n        jar: true,\r\n        encoding: 'binary'\r\n      })\r\n      return await mountJSON(html, type)\r\n    } catch (err) {\r\n      return Promise.reject(JSON.stringify(err.error))\r\n    }\r\n  }\r\n  // eslint-disable-next-line semi\r\n}\r\n"],"file":"index.js"}